## jvm内存

### jvm内存分区

jvm内存分为堆、栈、程序计数器，其中堆可细分为新生代、老年代、方法区，栈可细分为程序方法栈、本地方法栈。

![Alt](./内存模型.jpg)

#### 堆

​	堆细分为新生代、老年代、方法区。

##### 	新生代

###### 	区域划分

​		新生代区域划分为Eden区、survivor1和survivor2（survivor1和survivor2也叫from区和to区）。

######     新生代对象

​    非大对象会在创建时分配至Eden区，在下一次MinorGC时，将迁移至To区并年龄加一。

######     新生代年龄阈值

​    新生代中保存的对象，年龄均在一定范围内，有两种策略确定新生代年龄的阈值，要么通过配置jvm参数XXMaxTenuringThreshold来指定年龄，要么通过动态年龄判断来决定，动态年龄根据survivor区中各年龄对象占比决定，若minorGC结束后，在survivor区中的某个年龄的对象占比超过了survivor区的一半，那么这个年龄的对象同样也会进入老年代。

######    垃圾回收算法

​	因为新生代的数据，通常是使用时间较短的，因此在进行minorGC时，为了保证内存的连续性，采用复制算法进行垃圾回收。

​    把Eden区和from区两个区中存活的对象，复制到to区中，然后将eden区和from区清空。

​    ![Alt](./新生代GC图解.png)

#####   老年代

 